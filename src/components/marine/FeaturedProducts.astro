---
// FeaturedProducts.astro
const featuredProducts = [
  {
    id: 1,
    name: "Marine 31 Boat Soap",
    category: "Cleaners",
    rating: 4.8,
    price: "$24.99",
    image: "/images/products/marine31-soap.jpg",
    description: "pH-neutral boat soap that won't strip wax or sealants. Perfect for weekly maintenance cleaning.",
    pros: ["Won't strip wax", "Excellent suds", "Great value"],
    cons: ["Scent could be stronger"],
    affiliateLink: "https://starkeyachtcare.com/marine31-boat-soap",
    inStock: true,
    badge: "Editor's Choice"
  },
  {
    id: 2,
    name: "Meguiar's Marine Wax",
    category: "Waxes & Sealants",
    rating: 4.7,
    price: "$19.99",
    image: "/images/products/meguiars-marine-wax.jpg",
    description: "Premium carnauba wax blend specifically formulated for marine gelcoat and fiberglass.",
    pros: ["Long-lasting protection", "Easy application", "Great shine"],
    cons: ["Takes time to cure"],
    affiliateLink: "https://starkeyachtcare.com/meguiars-marine-wax",
    inStock: true,
    badge: "Best Value"
  },
  {
    id: 3,
    name: "Star brite Premium Microfiber Cloths",
    category: "Tools & Equipment",
    rating: 4.9,
    price: "$29.99",
    image: "/images/products/starbrite-microfiber.jpg",
    description: "Professional-grade microfiber cloths designed for marine detailing. Ultra-absorbent and lint-free.",
    pros: ["Ultra-absorbent", "Machine washable", "No scratching"],
    cons: ["Premium price point"],
    affiliateLink: "https://starkeyachtcare.com/starbrite-microfiber",
    inStock: true,
    badge: "Pro Choice"
  }
];
---

<section class="py-16 bg-white">
  <div class="px-8 max-w-7xl mx-auto">
    <!-- Section header -->
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold text-gray-900 mb-4">
        Editor's Top Picks
      </h2>
      <p class="text-xl text-gray-600 max-w-2xl mx-auto">
        Thoroughly tested marine detailing products that deliver exceptional results in Florida's challenging conditions.
      </p>
    </div>

    <!-- Products grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {featuredProducts.map((product) => (
        <article class="bg-white rounded-2xl border border-gray-200 shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group">
          <!-- Badge -->
          {product.badge && (
            <div class="absolute top-4 left-4 z-10">
              <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-600 text-white">
                {product.badge}
              </span>
            </div>
          )}

          <!-- Product image -->
          <div class="relative h-48 bg-gray-100 overflow-hidden">
            <img 
              src={product.image} 
              alt={product.name}
              class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
              loading="lazy"
            />
            {product.inStock && (
              <div class="absolute bottom-4 right-4">
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                  In Stock
                </span>
              </div>
            )}
          </div>

          <!-- Product content -->
          <div class="p-6">
            <!-- Category and rating -->
            <div class="flex items-center justify-between mb-2">
              <span class="text-sm font-medium text-blue-600">{product.category}</span>
              <div class="flex items-center gap-1">
                <div class="flex text-yellow-400">
                  {Array.from({ length: 5 }, (_, i) => (
                    <svg 
                      key={i}
                      class={`size-4 ${i < Math.floor(product.rating) ? 'fill-current' : 'text-gray-300'}`}
                      viewBox="0 0 20 20"
                    >
                      <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                    </svg>
                  ))}
                </div>
                <span class="text-sm font-medium text-gray-700">{product.rating}</span>
              </div>
            </div>

            <!-- Product name and price -->
            <h3 class="text-xl font-bold text-gray-900 mb-2">{product.name}</h3>
            <p class="text-2xl font-bold text-blue-600 mb-3">{product.price}</p>

            <!-- Description -->
            <p class="text-gray-600 text-sm mb-4 line-clamp-3">
              {product.description}
            </p>

            <!-- Pros and cons -->
            <div class="grid grid-cols-2 gap-4 mb-6">
              <div>
                <h4 class="text-sm font-semibold text-green-700 mb-2">Pros:</h4>
                <ul class="text-xs text-gray-600 space-y-1">
                  {product.pros.slice(0, 2).map((pro) => (
                    <li class="flex items-start gap-1">
                      <svg class="size-3 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                      </svg>
                      {pro}
                    </li>
                  ))}
                </ul>
              </div>
              <div>
                <h4 class="text-sm font-semibold text-red-700 mb-2">Cons:</h4>
                <ul class="text-xs text-gray-600 space-y-1">
                  {product.cons.slice(0, 1).map((con) => (
                    <li class="flex items-start gap-1">
                      <svg class="size-3 text-red-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                      </svg>
                      {con}
                    </li>
                  ))}
                </ul>
              </div>
            </div>

            <!-- Action buttons -->
            <div class="flex gap-3">
              <a 
                href={`/reviews/${product.name.toLowerCase().replace(/\s+/g, '-')}`}
                class="flex-1 inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors duration-200"
              >
                Read Review
              </a>
              <a 
                href={product.affiliateLink}
                target="_blank"
                rel="nofollow sponsored"
                class="flex-1 inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors duration-200"
              >
                Buy Now
                <svg class="ml-1 size-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-2M7 7h10l-5 5"/>
                </svg>
              </a>
            </div>
          </div>
        </article>
      ))}
    </div>

    <!-- View all products CTA -->
    <div class="text-center mt-12">
      <a 
        href="/reviews"
        class="inline-flex items-center justify-center px-8 py-3 text-lg font-semibold text-blue-600 bg-blue-50 rounded-xl hover:bg-blue-100 transition-colors duration-200"
      >
        View All Product Reviews
        <svg class="ml-2 size-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
        </svg>
      </a>
    </div>

    <!-- Affiliate disclosure -->
    <div class="mt-8 p-4 bg-gray-50 rounded-xl">
      <p class="text-xs text-gray-600 text-center">
        <strong>Disclosure:</strong> Salt Life Detail may earn affiliate commissions from purchases made through our links. 
        This doesn't affect our honest reviews or recommendations. We only recommend products we've personally tested and believe in.
      </p>
    </div>
  </div>
</section>